(()=>{"use strict";var e="tracking",t="http://localhost:4001",n=Date.now();window.addEventListener("load",(function(){var o,r,a;o=function(){try{var e=window.localStorage,t="__storage_test__";return e.setItem(t,t),e.removeItem(t),!0}catch(e){return!1}}(),r=Number(localStorage.getItem(e)),void 0===a&&(a=7),!(!o||r&&!((Date.now()-r)/864e5>a))&&(localStorage.removeItem(e),localStorage.setItem(e,String(n)),fetch(t,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({url:window.location.href,timestamp:new Date(n),text:"A user visited the website for the first time in the last 7 days."})}).catch((function(e){return console.error(e)}))),fetch(t,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({url:window.location.href,timestamp:new Date,text:"A user visited the website."})}).catch((function(e){return console.error(e)}))}));var o=document.getElementsByTagName("a");Array.from(o).map((function(e){e.addEventListener("click",(function(){return fetch(t,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({url:window.location.href,timestamp:new Date,text:"A user clicked on a link.",targetUrl:e.href})}).catch((function(e){return console.error(e)}))}))})),window.addEventListener("beforeunload",(function(){return fetch(t,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({url:window.location.href,timestamp:new Date,text:"A user left the website."})}).catch((function(e){return console.error(e)}))})),window.track=function(e){"complete"===document.readyState&&fetch(t,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).catch((function(e){return console.error(e)}))}})();