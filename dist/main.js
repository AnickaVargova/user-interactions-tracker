(()=>{"use strict";const e="tracking200",t="http://localhost:4001",o={url:window.location.href,timestamp:Date.now(),text:"A user visited the website for the first time in the last 7 days."};window.addEventListener("load",(()=>{((e,t,o=7)=>{if(e){if(t){const e=864e5;return!!((Date.now()-t.timestamp)/e>o)}return!0}return!1})((()=>{try{const e=window.localStorage,t="__storage_test__";return e.setItem(t,t),e.removeItem(t),!0}catch(e){return!1}})(),localStorage.getItem(e))&&(localStorage.removeItem(e),localStorage.setItem(e,o),fetch(t,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({...o,timestamp:new Date(o.timestamp)})}).catch((e=>console.error(e)))),fetch(t,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({url:window.location.href,timestamp:new Date,text:"A user visited the website."})}).catch((e=>console.error(e)))}));const n=document.getElementsByTagName("a");Array.from(n).map((e=>{e.addEventListener("click",(()=>fetch(t,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({url:window.location.href,timestamp:new Date,text:"A user clicked on a link.",targetUrl:e.href})}).catch((e=>console.error(e)))))})),window.addEventListener("beforeunload",(()=>fetch(t,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({url:window.location.href,timestamp:new Date,text:"A user left the website."})}).catch((e=>console.error(e))))),window.track=e=>{"complete"===document.readyState&&fetch(t,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).catch((e=>console.error(e)))}})();